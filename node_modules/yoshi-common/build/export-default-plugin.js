"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const webpack_sources_1 = require("webpack-sources");
class default_1 {
    apply(compiler) {
        compiler.hooks.thisCompilation.tap('ExportDefaultPlugin', compilation => {
            const { mainTemplate, chunkTemplate } = compilation;
            const onRenderWithEntry = (source) => {
                return new webpack_sources_1.ConcatSource(`(function (val) { return val.default || val; })(`, source, `)`);
            };
            for (const template of [mainTemplate, chunkTemplate]) {
                // @ts-ignore
                template.hooks.renderWithEntry.tap('ExportDefaultPlugin', onRenderWithEntry);
            }
            // @ts-ignore
            mainTemplate.hooks.hash.tap('ExportDefaultPlugin', hash => {
                hash.update('export property');
                // @ts-ignore
                hash.update(`${this.property}`);
            });
        });
    }
}
exports.default = default_1;
//# sourceMappingURL=export-default-plugin.js.map