"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const storybook_process_1 = __importDefault(require("./storybook-process"));
(async () => {
    process.stdin.resume();
    const storybookProcess = storybook_process_1.default.create({ port: 9009 });
    process.send({ type: 'compiling' });
    storybookProcess.on('compiling', () => {
        process.send({ type: 'compiling' });
    });
    storybookProcess.on('finished-log', ({ stats, port }) => {
        process.send({
            type: 'finished-log',
            port,
            stats: stats.toJson({}, true),
        });
    });
    storybookProcess.on('listening', (port) => {
        process.send({ type: 'listening', port });
    });
    try {
        await storybookProcess.start();
    }
    catch (e) {
        process.send({ type: 'error', error: e.message });
    }
})();
//# sourceMappingURL=storybook-worker.js.map