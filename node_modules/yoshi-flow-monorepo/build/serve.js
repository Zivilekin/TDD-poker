"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const serve_1 = require("yoshi-common/build/commands/serve");
const load_package_graph_1 = __importDefault(require("./load-package-graph"));
exports.default = async ({ env, cwd } = {}) => {
    const graphResult = await load_package_graph_1.default(cwd);
    const closeFunctions = await Promise.all(graphResult.apps.map(async (app) => {
        return serve_1.serveApp({
            config: app.config,
            cwd: app.location,
            env,
            useAppName: true,
        });
    }));
    return () => Promise.all(closeFunctions.map(func => func()));
};
//# sourceMappingURL=serve.js.map